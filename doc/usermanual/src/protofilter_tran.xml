<?xml version="1.0" encoding="UTF-8"?>
<chapter id="protofilter_tran">

  <title>Rogue Protocol Control</title>
  <para>
    The Rogue Protocol Control Appliance is identified by the
    <inlinemediaobject>
      <imageobject>
        <imagedata fileref="figure/protofilter/protofilter_tran_icon.png"/>
      </imageobject>
    </inlinemediaobject>
    symbol.  If the Rogue Protocol Control Appliance is not installed, please refer to <xref linkend="using_adminui_appliances"/> for installation instructions.
  </para>
  <para>
    The Rogue Protocol Control Appliance is used by Administrators to block well known protocols from entering or leaving the protected network.  For example, Peer to Peer (P2P) protocols can be blocked from a corporate office or game protocols from a school.
  </para>
  
  <sect1 id="protofilter_tran_adminui">
    <title>Administrative Interface</title>

    <para>
      The interface for the Rogue Protocol Control Appliance has two tabs.  The first tab, covered in section <xref linkend="protofilter_tran_block"/>, allow administrators to define which protocols are blocked.   The second tab, discussed in <xref linkend="protofilter_tran_eventlog"/>, allows administrators to the recent history of blocked protocols.
    </para>
    
    <!-- ======================================================== -->
    <sect2 id="protofilter_tran_block">
      <title>Protocol Block List</title>
      <para>
        The Protocol Block List, as shown in <xref linkend="protofilter_tran_block_figure"/>, allows administrators to choose which protocols to block.  Most well known protocols are listed.
      </para>
      <figure id="protofilter_tran_block_figure">
        <title>Protocol Block List Tab</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="figure/protofilter/protofilter_block.png" />
          </imageobject>
        </mediaobject>
      </figure>
      <para>
        Each protocol is given a logical <guilabel>category</guilabel>, as well as its common-named <guilabel>protocol</guilabel>.  To cause a given protocol to be blocked from <emphasis>either entering or leaving</emphasis> your protected network, check the box in the <guilabel>block</guilabel> column.  If you only want to audit your traffic (for example, to see if anyone within the network is participating in file sharing), you can check the <guilabel>log</guilabel> box for that protocol.  If <guilabel>log</guilabel> is checked, occurances of the protocol found by &eg; can be seen in the Even Log (see <xref linkend="protofilter_tran_eventlog"/>
      </para>
      <para>
        As with most Software Appliances within &eg;, administrators can define their own entries in the Protocol Block table.  However, this appliance is configured with <glossterm linkend="gloss_regex">regular expressions</glossterm>.  Configuring regular expressions to match internet protocols is an advanced topic, which will not be covered in this document.
        <caution>
          <para>
          Attempting to create your own entry in the Protocol Block List could result in legitimate traffic being blocked if your regular expression contains errors.
          </para>       
        </caution>        
      </para>
    </sect2>
  
    <!-- ======================================================== -->
    <sect2 id="protofilter_tran_eventlog">
      <title>Event Log</title>
      <para>
        The Events tab contents is shown in <xref linkend="protofilter_tran_eventlog_figure"/>.
      </para>
      <figure id="protofilter_tran_eventlog_figure">
        <title>Event Log Tab</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="figure/protofilter/protofilter_eventlog.png" />
          </imageobject>
        </mediaobject>
      </figure>
      <para>
        The Events Tab is another implementation of an Event Log, as described in <xref linkend="using_adminui_appliances_eventlog"/>.  The <guilabel>action</guilabel> describes the action which the &eg; took on the connection.  The <guilabel>client</guilabel> field is the IP address of the client, and <guilabel>request</guilabel> is a descriptive summary of the traffic attempt.
      </para>         
    </sect2>   
  </sect1>

  <sect1 id="protofilter_tran_qa">
    <title>Frequently Asked Questions</title>
    <qandaset>  
      <qandaentry>
        <question>
          <para>I've already installed the Firewall Appliance.  Isn't The Rougue Protocol Control Appliance redundant?</para>
        </question>
        <answer>
          <para>
            The Firewall application works to block traffic for <glossterm linkend="gloss_ip_addr">IP addresses</glossterm> and/or <glossterm linkend="gloss_port">ports</glossterm>.  For well behaved applications (such as legitimate web and email servers) the port can be used to identify the protocol.  However, less legitimate applications may use different ports, or malicious users may deliberatly use unwanted services on obscure ports.  
          </para>
          <para>
            The Rougue Protocol Control Appliance scans <emphasis>all</emphasis> traffic, looking for a <quote>match</quote> even if the traffic was not transported across the expected port for that protocol.
          </para>
        </answer>
      </qandaentry>
      <qandaentry>
        <question>
          <para>I want to block <constant>[some file sharing protocol]</constant> for some of my users but not all.  How can I do this with Rougue Protocol Control?</para>
        </question>
        <answer>
          <para>
            The Rougue Protocol Appliance cannot filter just for <quote>some</quote> machines, and not others.  However, you can create new Policies and Virtual Racks <xref linkend="policy_manager"/> to partition some of your users through a Rougue Protocol Appliance (with <constant>[some file sharing protocol]</constant> blocked) and not others.
          </para>
        </answer>
      </qandaentry>      
    </qandaset>
  </sect1>    
  
</chapter>
