#!@PREFIX@/usr/share/untangle/bin/ut-pycli -f 

#
# A simple utility to check the validity of a license
# Example: ut-checkLicense untangle-node-sitefilter
#
# If a valid license is found, it exits with a return code of 0
# Otherwise 1
#
#

import sys

if len(sys.argv) < 4:
    print "Usage: %s <packageName> " % sys.argv[2]
    sys.exit(1)

packageName = sys.argv[3]
license = uvm.licenseManager().getLicense(packageName)

if license == None:
    print "False (no license found)"
    sys.exit(1)
else:
    if license.has_key('valid') and (license['valid'] == 'True' or license['valid'] == True):
        print "True (license valid)"
        sys.exit(0)

print "False (license not valid)"
sys.exit(1)



