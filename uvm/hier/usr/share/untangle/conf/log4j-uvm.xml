<?xml version="1.0" encoding="UTF-8"?>
<!--
 * $HeadURL$
 * Copyright (c) 2003-2007 Untangle, Inc. 
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License, version 2,
 * as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful, but
 * AS-IS and WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE, TITLE, or
 * NONINFRINGEMENT.  See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
-->
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<!-- ===================================================================== -->
<!--                                                                       -->
<!--  Log4j Configuration for UVM                                          -->
<!--                                                                       -->
<!--     Configuration of all uvm loggers lives here.                      -->
<!--                                                                       -->
<!-- ===================================================================== -->

<!-- $Id$ -->

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"
                     debug="false">

  <!-- ============================================== -->
  <!-- Appenders                                      -->
  <!-- ============================================== -->

  <appender name="UVMLOG" class="org.apache.log4j.net.SyslogAppender">
    <param name="SyslogHost" value="localhost"/>
    <param name="Facility" value="LOCAL0"/>
    <param name="Threshold" value="ALL"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="[%c{1}] %-5p %m%n"/>
    </layout>
  </appender>

  <appender name="SCHEMA" class="org.apache.log4j.net.SyslogAppender">
    <param name="SyslogHost" value="localhost"/>
    <param name="Facility" value="LOCAL3"/>
    <param name="Threshold" value="ALL"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="[%c{1}] %-5p %m%n"/>
    </layout>
  </appender>

  <appender name="EVENTS" class="org.apache.log4j.net.SyslogAppender">
    <param name="SyslogHost" value="localhost"/>
    <param name="Facility" value="LOCAL5"/>
    <param name="Threshold" value="ALL"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%-5p %m%n"/>
    </layout>
  </appender>

  <appender name="REPORTER" class="org.apache.log4j.net.SyslogAppender">
    <param name="SyslogHost" value="localhost"/>
    <param name="Facility" value="LOCAL4"/>
    <param name="Threshold" value="ALL"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="[%c{1}] %-5p %m%n"/>
    </layout>
  </appender>

  <!-- ============================================== -->
  <!-- Categories                                     -->
  <!-- ============================================== -->

  <category name="org.apache.catalina">
    <priority value="INFO"/>
  </category>

  <category name="org.apache.jk">
    <priority value="INFO"/>
  </category>

  <category name="org.hibernate">
    <priority value="WARN"/>
  </category>

  <category name="com.untangle.uvm.argon.SessionGlobalState">
    <priority value="WARN"/>
  </category>

  <category name="com.untangle.uvm.argon">
    <priority value="WARN"/>
  </category>

  <category name="com.untangle.jnetcap">
    <priority value="WARN"/>
  </category>

  <category name="com.untangle.jvector">
    <priority value="WARN"/>
  </category>

  <category name="com.untangle.uvm.logging">
    <priority value="WARN"/>
  </category>

  <category name="com.untangle.uvm.snmp">
    <priority value="INFO"/>
  </category>

  <!-- event logs need to have a specific facility -->
  <category name="com.untangle.uvm.engine.SyslogManagerImpl" additivity="false">
    <priority value="ALL"/>
    <appender-ref ref="EVENTS"/>
  </category>

  <!-- so do schema-related logs -->
  <category name="com.untangle.uvm.engine.SchemaUtil" additivity="false">
    <priority value="ALL"/>
    <appender-ref ref="SCHEMA"/>
  </category>

  <!-- normal level for engine and following is INFO -->
  <category name="com.untangle.uvm.engine">
    <priority value="INFO"/>
  </category>

  <category name="com.untangle.uvm.engine.PipelineFoundryImpl">
    <priority value="INFO"/>
  </category>

  <category name="com.untangle.uvm.engine.SettingsManagerImpl">
    <priority value="INFO"/>
  </category>

  <category name="com.untangle.uvm.networking">
    <priority value="INFO"/>
  </category>

  <category name="com.untangle.uvm.license">
    <priority value="INFO"/>
  </category>

  <category name="com.untangle.node.util">
    <priority value="INFO"/>
  </category>

  <category name="com.mchange">
    <priority value="INFO"/>
  </category>


  <!-- ============================================== -->
  <!-- The Root Category                              -->
  <!-- ============================================== -->

  <!-- All UVM logs go to the UVMLog file -->
  <root>
    <priority value="WARN"/>
    <appender-ref ref="UVMLOG"/>
  </root>
</log4j:configuration>
