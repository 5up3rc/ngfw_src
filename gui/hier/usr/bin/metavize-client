#!/bin/sh

# Copyright (c) 2004, 2005 Metavize Inc.
# All rights reserved.
#
# This software is the confidential and proprietary information of
# Metavize Inc. ("Confidential Information").  You shall
# not disclose such Confidential Information.
#
# $Id: metavize-client,v 1.11 2005/02/24 04:38:35 inieves Exp $


JAVA_HOME=${JAVA_HOME:-/opt/java}

export JAVA_HOME

if [ $# != 1 -o x$1 = "xlocalhost" ] ; then
    # the SSL key has a canonical name of $(hostname)
    HOST="$(hostname)"
else
    HOST="$1"
fi

echo "Initializing Webstart configuration: ${HOME}/.java/.deployment/deployment.properties"
${JAVA_HOME}/jre/javaws/javaws -updateVersions

#echo "Attempting to clear Webstart cache"
#${JAVA_HOME}/jre/javaws/javaws -Xclearcache

echo "Webstarting Metavize Client.  Connecting to: http://$HOST/webstart/gui.jnlp"
exec ${JAVA_HOME}/jre/javaws/javaws -Xnosplash http://$HOST/webstart/gui.jnlp
